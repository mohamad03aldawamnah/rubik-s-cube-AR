<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <script>
        AFRAME.registerComponent('rotation-controller', {
            schema: {
                speed: { type: 'number', default: 2 }
            },

            init: function () {
                if (!this.el.classList.contains('RBsCube')) {
                    return;
                }

                // 获取 RBsCube 内部所有 cube
                var cubes = this.el.querySelectorAll('.cube');

                // 获取角块、棱块、中心块
                var cornerCubes = this.getCornerCubes(cubes);
                var edgeCubes = this.getEdgeCubes(cubes);
                var centerCubes = this.getCenterCubes(cubes);

                // 打印结果
                this.printCubes('Corner Cubes', cornerCubes);
                this.printCubes('Edge Cubes', edgeCubes);
                this.printCubes('Center Cubes', centerCubes);
            },

            // 获取角块：三个坐标都是 ±2
            getCornerCubes: function (cubes) {
                return Array.from(cubes).filter(cube => {
                    var pos = cube.getAttribute('position');
                    var x = Math.round(pos.x);
                    var y = Math.round(pos.y);
                    var z = Math.round(pos.z);
                    return Math.abs(x) === 2 && Math.abs(y) === 2 && Math.abs(z) === 2;
                });
            },

            // 获取棱块：两个坐标是 ±2，另一个坐标是 0
            getEdgeCubes: function (cubes) {
                return Array.from(cubes).filter(cube => {
                    var pos = cube.getAttribute('position');
                    var x = Math.round(pos.x);
                    var y = Math.round(pos.y);
                    var z = Math.round(pos.z);
                    return (
                        (Math.abs(x) === 2 && Math.abs(y) === 2 && z === 0) ||  // XY 平面
                        (Math.abs(x) === 2 && y === 0 && Math.abs(z) === 2) ||  // XZ 平面
                        (x === 0 && Math.abs(y) === 2 && Math.abs(z) === 2)     // YZ 平面
                    );
                });
            },

            // 获取中心块：两个坐标轴是 0，另一个是 ±2
            getCenterCubes: function (cubes) {
                return Array.from(cubes).filter(cube => {
                    var pos = cube.getAttribute('position');
                    var x = Math.round(pos.x);
                    var y = Math.round(pos.y);
                    var z = Math.round(pos.z);
                    return (
                        (x === 0 && y === 0 && Math.abs(z) === 2) ||  // Z 轴方向
                        (x === 0 && Math.abs(y) === 2 && z === 0) ||  // Y 轴方向
                        (Math.abs(x) === 2 && y === 0 && z === 0)     // X 轴方向
                    );
                });
            },

            // 统一打印 cube 信息
            printCubes: function (title, cubes) {
                console.log(title + ":", cubes.map(cube => cube.getAttribute('position')));
            }
        });
    </script>
</head>
<body style="margin: 0px; overflow: hidden;">
<a-scene>
    <a-camera position="0 8 20"></a-camera>
    <a-sky color="black"></a-sky>

    <a-entity class="RBsCube" rotation-controller>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 0 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 0 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 0 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 0 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 0 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 0 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 0 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 0 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 0 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 2 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 2 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 2 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 2 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 2 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 2 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 2 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 2 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 2 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 -2 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 -2 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 -2 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 -2 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="0 -2 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 -2 0" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 -2 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="2 -2 -2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
        <a-gltf-model src="#cube" class="cube" keyboard-listener position="-2 -2 2" rotation="0 0 0" scale="2 2 2" 2></a-gltf-model>
    </a-entity>

    <a-assets>
        <img id="my-image" src="../../image.png">
        <a-asset-item id="cube" src="../../RBsCubeWorldOrigin.glb"></a-asset-item>
    </a-assets>
    <a-curvedimage
            color="#570000"
            metalness="10"
            rotation="0 0 0"
            position="0 -1 0"
            height="0.2"
            radius="5"
            theta-length="360">
    </a-curvedimage>
    <a-sky color="black"></a-sky>
    <a-text
            value="Dev Mode"
            color="white"
            width="10"
            font="https://cdn.aframe.io/fonts/DejaVu-sdf.fnt"
            position="-1 11 0">
    </a-text>
</a-scene>

</body>
</html>